/*!
 * @author    Panagiotis Vagenas <pan.vagenas@gmail.com>
 * @link      http://erp.xdark.eu
 * @copyright 2014 Panagiotis Vagenas <pan.vagenas@gmail.com>
 */
(function(a){a(function(){a(".dsplLayout").change(function(){var b={action:"loadTemplateOptions",template:a(this).val(),templateRoot:templateRoot};a(this).addClass("loadingElement");jQuery.post(ajaxurl,b,function(c){if(c==false){alert("Template has no options or template folder couldn't be found");a(".templateSettings").fadeOut("slow",null,function(){a(".templateSettings").html("");a(".dsplLayout").removeClass("loadingElement")})}else{a(".templateSettings").html(c.content).fadeIn("slow");a(".dsplLayout").removeClass("loadingElement")}},"json")});a(".dsplLayout").trigger("change");a("#clearCacheButton").click(function(){var b=confirm("This action will flush all Easy Related Posts plugin cache.\nAre you sure you want to continue?");if(b===false){return true}a(this).addClass("loadingElement").prop("disabled",true);var c={action:"erpClearCache"};jQuery.post(ajaxurl,c,function(d){if(d==true){alert("Cache cleared.")}else{alert("There was an error. Action not completed.")}a("#clearCacheButton").removeClass("loadingElement").prop("disabled",false)},"json")});a("#erp_license_activate").click(function(b){b.preventDefault();a(this).addClass("loadingElement").prop("disabled",true);var c={action:"erpLiveLic",erp_license_activate:a("#licence").val(),erp_nonce:a("#erp_nonce").val()};jQuery.post(ajaxurl,c,function(d){console.log(d);if(d.res==true){alert("Licence activated!");location.reload(true)}else{if(d.error!=undefined){msg="There was an error: "+d.error}else{msg="There was an error. Please check your input"}alert(msg);a("#erp_license_activate").removeClass("loadingElement").prop("disabled",false)}},"json")});a("#erp_license_deactivate").click(function(b){b.preventDefault();a(this).addClass("loadingElement").prop("disabled",true);var c={action:"erpKillLic",erp_license_deactivate:a("#licence").val(),erp_nonce:a("#erp_nonce").val()};jQuery.post(ajaxurl,c,function(d){console.log(d);if(d.res==true){alert("Licence deactivated");location.reload(true)}else{if(d.error!=undefined){msg="There was an error: "+d.error}else{msg="There was an error. Please check your input"}alert(msg);a("#erp_license_deactivate").removeClass("loadingElement").prop("disabled",false)}},"json")});a("#rebuildCacheButton").click(function(){var b=confirm("This may take a while. Are you sure you want to rebuild cache now?");if(b===false){return true}a(this).addClass("loadingElement").prop("disabled",true);var c={action:"erpRebuildCache"};jQuery.post(ajaxurl,c,function(d){if(d==true){alert("Cache rebuild successfull.")}else{alert("There was an error. Action not completed.")}a("#rebuildCacheButton").removeClass("loadingElement").prop("disabled",false)},"json")});a("#select-all-custom").click(function(){if(!a(this).is(":checked")){a(".custom").attr("checked",false)}else{a(".custom").attr("checked","checked")}});a(".custom").change(function(){if(a(".custom:checked").length===a(".custom").length){a("#select-all-custom").attr("checked","checked")}else{a("#select-all-custom").attr("checked",false)}});a("#select-all-built-in").click(function(){if(!a(this).is(":checked")){a(".built-in").attr("checked",false)}else{a(".built-in").attr("checked","checked")}});a(".built-in").change(function(){if(a(".built-in:checked").length===a(".built-in").length){a("#select-all-built-in").attr("checked","checked")}else{a("#select-all-built-in").attr("checked",false)}});a("#select-all-tag").click(function(){if(!a(this).is(":checked")){a(".tag").attr("checked",false)}else{a(".tag").attr("checked","checked")}});a(".tag").change(function(){if(a(".tag:checked").length===a(".tag").length){a("#select-all-tag").attr("checked","checked")}else{a("#select-all-tag").attr("checked",false)}});a("#select-all-cat").click(function(){if(!a(this).is(":checked")){a(".cat").attr("checked",false)}else{a(".cat").attr("checked","checked")}});a(".cat").change(function(){if(a(".cat:checked").length===a(".cat").length){a("#select-all-cat").attr("checked","checked")}else{a("#select-all-cat").attr("checked",false)}});options.beforeActivate=function(b,c){a("#tab-spec").val(c.newPanel.attr("id").substring(5)-1)};a("#tabs-holder").tabs(options);a(".erpAccordion").accordion({heightStyle:"content",collapsible:true});jQuery("#postTitleColor").wpColorPicker();jQuery("#excColor").wpColorPicker()})}(jQuery));